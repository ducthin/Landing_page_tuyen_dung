#!/bin/bash

echo "ğŸ“‹ HÆ¯á»šNG DáºªN TEST á»¨NG Dá»¤NG CHáº Y TRá»°C TIáº¾P TRÃŠN VPS"
echo "=================================================="
echo ""
echo "ğŸ¯ MUC ÄÃCH:"
echo "   Kiá»ƒm tra xem Gmail SMTP cÃ³ hoáº¡t Ä‘á»™ng khi á»©ng dá»¥ng Spring Boot"
echo "   cháº¡y trá»±c tiáº¿p trÃªn VPS (khÃ´ng qua Docker container)"
echo ""
echo "ğŸ“ CÃC BÆ¯á»šC THá»°C HIá»†N:"
echo ""
echo "1ï¸âƒ£ CHUáº¨N Bá»Š:"
echo "   - Äáº£m báº£o file .env cÃ³ Ä‘áº§y Ä‘á»§ thÃ´ng tin Gmail"
echo "   - Kiá»ƒm tra Gmail app password vÃ  2FA Ä‘Ã£ báº­t"
echo ""
echo "2ï¸âƒ£ CHáº Y TEST (trÃªn VPS):"
echo "   # BÆ°á»›c 1: Upload scripts lÃªn VPS"
echo "   scp test-direct-run.sh test-email-direct.sh cleanup-direct-test.sh user@your-vps:~/recruitment-app/"
echo ""
echo "   # BÆ°á»›c 2: SSH vÃ o VPS"
echo "   ssh user@your-vps"
echo "   cd ~/recruitment-app"
echo ""
echo "   # BÆ°á»›c 3: Cáº¥p quyá»n cho scripts"
echo "   chmod +x test-direct-run.sh test-email-direct.sh cleanup-direct-test.sh"
echo ""
echo "   # BÆ°á»›c 4: Cháº¡y test (Terminal 1)"
echo "   ./test-direct-run.sh"
echo ""
echo "   # BÆ°á»›c 5: Test email (Terminal 2 - SSH má»›i)"
echo "   ssh user@your-vps"
echo "   cd ~/recruitment-app"
echo "   ./test-email-direct.sh"
echo ""
echo "   # BÆ°á»›c 6: Dá»n dáº¹p sau test"
echo "   ./cleanup-direct-test.sh"
echo ""
echo "ğŸ” ÄIá»€U KIá»†N KIá»‚M TRA:"
echo "   âœ… App build thÃ nh cÃ´ng"
echo "   âœ… Káº¿t ná»‘i MySQL OK"
echo "   âœ… App start trÃªn port 8080"
echo "   âœ… Email config load Ä‘Ãºng"
echo "   âœ… Test email gá»­i thÃ nh cÃ´ng"
echo ""
echo "ğŸ“§ Káº¾T QUáº¢ MONG MUá»N:"
echo "   - Náº¿u email Gá»¬I THÃ€NH CÃ”NG â†’ Váº¥n Ä‘á» á»Ÿ Docker environment"
echo "   - Náº¿u email VáºªN Lá»–I â†’ Váº¥n Ä‘á» á»Ÿ Gmail/VPS/network"
echo ""
echo "ğŸ”§ Náº¾U VáºªN Lá»–I, THá»¬:"
echo "   1. Táº¡o Gmail account má»›i vá»›i app password má»›i"
echo "   2. Chuyá»ƒn sang Outlook SMTP"
echo "   3. Sá»­ dá»¥ng SendGrid/Mailgun"
echo ""
echo "ğŸ“ DEBUG COMMANDS:"
echo "   # Kiá»ƒm tra app logs khi Ä‘ang cháº¡y"
echo "   tail -f nohup.out"
echo ""
echo "   # Test SMTP manual"
echo "   telnet smtp.gmail.com 587"
echo ""
echo "   # Kiá»ƒm tra port"
echo "   netstat -tlnp | grep 8080"
echo ""
echo "ğŸš¨ LÆ¯U Ã:"
echo "   - Script sáº½ dá»«ng Docker containers Ä‘á»ƒ trÃ¡nh xung Ä‘á»™t port"
echo "   - Sau test nhá»› cháº¡y cleanup Ä‘á»ƒ khÃ´i phá»¥c containers"
echo "   - App cháº¡y trá»±c tiáº¿p sáº½ dÃ¹ng port 8080"
echo "   - KhÃ´ng expose ra internet, chá»‰ test local trÃªn VPS"
